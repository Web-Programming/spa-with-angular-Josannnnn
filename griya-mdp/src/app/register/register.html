<section class="register-section py-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 mx-auto">

        <!-- Section Header -->
        <div class="text-center mb-5">
          <h1 class="display-4 fw-bold text-primary mb-3">Daftar Akun</h1>
          <p class="lead text-muted">Bergabunglah dengan Griya MDP dan temukan properti impian Anda!</p>
        </div>

        <!-- Register Form Card -->
        <div class="card shadow-lg border-0">
          <div class="card-body p-4 p-md-5">

            <!-- Success Alert -->
            <div class="alert alert-success alert-dismissible fade show" role="alert" *ngIf="successMessage">
              <i class="bi bi-check-circle-fill me-2"></i>{{ successMessage }}
              <button type="button" class="btn-close" (click)="successMessage = ''"></button>
            </div>

            <!-- Error Alert -->
            <div class="alert alert-danger alert-dismissible fade show" role="alert" *ngIf="errorMessage">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ errorMessage }}
              <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
            </div>

            <form [formGroup]="registerForm" (ngSubmit)="submitRegister()">

              <!-- NAME -->
              <div class="mb-4">
                <label for="name" class="form-label fw-semibold">
                  <i class="bi bi-person-fill me-2"></i>Nama Lengkap
                </label>
                <input 
                  type="text"
                  id="name"
                  class="form-control form-control-lg"
                  formControlName="name"
                  [class.is-invalid]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
                  placeholder="Masukkan nama lengkap Anda">

                <div class="invalid-feedback" *ngIf="registerForm.get('name')?.touched">
                  <div *ngIf="registerForm.get('name')?.errors?.['required']">Nama harus diisi</div>
                  <div *ngIf="registerForm.get('name')?.errors?.['minlength']">Nama minimal 2 karakter</div>
                </div>

                <div class="form-text" *ngIf="!registerForm.get('name')?.touched || registerForm.get('name')?.valid">
                  Nama akan digunakan sebagai identitas akun Anda
                </div>
              </div>

              <!-- EMAIL -->
              <div class="mb-4">
                <label for="email" class="form-label fw-semibold">
                  <i class="bi bi-envelope-fill me-2"></i>Email
                </label>
                <input 
                  type="email"
                  id="email"
                  class="form-control form-control-lg"
                  formControlName="email"
                  [class.is-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
                  placeholder="nama@example.com">

                <div class="invalid-feedback" *ngIf="registerForm.get('email')?.touched">
                  <div *ngIf="registerForm.get('email')?.errors?.['required']">Email harus diisi</div>
                  <div *ngIf="registerForm.get('email')?.errors?.['email']">Format email tidak valid</div>
                </div>

                <div class="form-text" *ngIf="!registerForm.get('email')?.touched || registerForm.get('email')?.valid">
                  Kami tidak akan membagikan email Anda kepada pihak lain
                </div>
              </div>

              <!-- PASSWORD -->
              <div class="mb-4">
                <label for="password" class="form-label fw-semibold">
                  <i class="bi bi-lock-fill me-2"></i>Password
                </label>
                <div class="input-group">
                  <input 
                    [type]="showPassword ? 'text' : 'password'"
                    id="password"
                    class="form-control form-control-lg"
                    formControlName="password"
                    placeholder="Minimal 6 karakter"
                    [class.is-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">

                  <button type="button" class="btn btn-outline-secondary" (click)="showPassword = !showPassword">
                    <i [ngClass]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
                  </button>
                </div>

                <div class="invalid-feedback d-block" *ngIf="registerForm.get('password')?.touched">
                  <div *ngIf="registerForm.get('password')?.errors?.['required']">Password harus diisi</div>
                  <div *ngIf="registerForm.get('password')?.errors?.['minlength']">Password minimal 6 karakter</div>
                </div>

                <div class="form-text" *ngIf="!registerForm.get('password')?.touched || registerForm.get('password')?.valid">
                  Gunakan kombinasi huruf, angka, dan simbol untuk keamanan maksimal
                </div>
              </div>

              <!-- CONFIRM PASSWORD -->
              <div class="mb-4">
                <label for="confirmPassword" class="form-label fw-semibold">
                  <i class="bi bi-lock-fill me-2"></i>Konfirmasi Password
                </label>

                <div class="input-group">
                  <input 
                    [type]="showConfirmPassword ? 'text' : 'password'"
                    id="confirmPassword"
                    class="form-control form-control-lg"
                    formControlName="confirmPassword"
                    placeholder="Ketik ulang password"
                    [class.is-invalid]="
                      registerForm.get('confirmPassword')?.touched &&
                      (registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['mismatch'])
                    ">

                  <button type="button" class="btn btn-outline-secondary" (click)="showConfirmPassword = !showConfirmPassword">
                    <i [ngClass]="showConfirmPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
                  </button>
                </div>

                <div class="invalid-feedback d-block" *ngIf="registerForm.get('confirmPassword')?.errors?.['required'] && registerForm.get('confirmPassword')?.touched">
                  Konfirmasi password harus diisi
                </div>

                <div class="invalid-feedback d-block" *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched">
                  Password dan Konfirmasi Password tidak cocok
                </div>

                <div class="form-text" *ngIf="!registerForm.errors?.['mismatch']">
                  Pastikan konfirmasi password sama dengan password
                </div>
              </div>

              <!-- TERMS -->
              <div class="mb-4">
                <div class="form-check">
                  <input type="checkbox" id="terms" class="form-check-input">
                  <label class="form-check-label" for="terms">
                    Saya menyetujui <a href="#">Syarat & Ketentuan</a> serta <a href="#">Kebijakan Privasi</a>
                  </label>
                </div>
              </div>

              <!-- SUBMIT BUTTON -->
              <div class="d-grid gap-2 mb-3">
                <button 
                  type="submit" 
                  class="btn btn-primary btn-lg py-3"
                  [disabled]="registerForm.invalid || isLoading">

                  <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
                  <i *ngIf="!isLoading" class="bi bi-person-plus-fill me-2"></i>

                  {{ isLoading ? 'Memproses...' : 'Daftar Sekarang' }}
                </button>
              </div>

              <!-- LOGIN LINK -->
              <div class="text-center">
                <p class="mb-0 text-muted">
                  Sudah punya akun? 
                  <a routerLink="/login" class="text-primary fw-semibold">Login di sini</a>
                </p>
              </div>

            </form>

            <!-- BENEFITS SECTION -->
            <div class="row mt-5 g-4">
              <div class="col-md-4">
                <div class="card h-100 text-center shadow-sm border-0">
                  <div class="card-body">
                    <i class="bi bi-shield-check fs-1 text-primary"></i>
                    <h6 class="fw-bold mt-3">Aman & Terpercaya</h6>
                    <p class="text-muted small">Data Anda dilindungi dengan enkripsi tinggi</p>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="card h-100 text-center shadow-sm border-0">
                  <div class="card-body">
                    <i class="bi bi-bell-fill fs-1 text-success"></i>
                    <h6 class="fw-bold mt-3">Update Terbaru</h6>
                    <p class="text-muted small">Dapatkan notifikasi properti terbaru</p>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="card h-100 text-center shadow-sm border-0">
                  <div class="card-body">
                    <i class="bi bi-heart-fill fs-1 text-danger"></i>
                    <h6 class="fw-bold mt-3">Simpan Favorit</h6>
                    <p class="text-muted small">Bookmark properti favorit Anda</p>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>
